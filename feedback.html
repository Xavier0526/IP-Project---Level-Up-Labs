<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Feedback</title>


  <link rel="stylesheet" href="main.css" />
</head>

<body class="page-feedback">

<div class="topbar">
  <button class="back" type="button" onclick="history.back()">←</button>

  <div class="title">Feedback</div>

  <a href="profile.html" class="avatar">
    <img src="profile.jpg" alt="Profile" />
  </a>
</div>

<div class="wrap">
  <div class="form-area">

    <form id="feedbackForm" novalidate>

      <div class="field">
        <div class="label">Email</div>
        <input class="input" id="email" type="email" required />
      </div>

      <div class="field">
        <div class="label">Subject</div>
        <input class="input" id="subject" type="text" required />
      </div>

      <div class="field">
        <div class="label">Type of Issue</div>
        <select class="select" id="issueType" required>
          <option value="" selected disabled></option>
          <option>Bug / Feature not working</option>
          <option>Account / Login</option>
          <option>Rewards / Points</option>
          <option>Suggestion / Improvement</option>
          <option>Other</option>
        </select>
      </div>

      <div class="field">
        <div class="label">Description</div>
        <textarea class="textarea" id="description" required></textarea>
      </div>

      <div class="actions">
        <button class="btn" id="openConfirmBtn" type="button">Submit</button>
      </div>

    </form>

  </div>
</div>

<!-- OVERLAY -->
<div class="overlay" id="overlay">

  <div class="bubble" id="confirmBubble">
    <h3>Confirm Submission</h3>
    <p>Are you sure you want to submit this form?</p>

    <button class="bubble-btn" id="confirmSubmitBtn" type="button">Submit</button>
    <button class="bubble-link" id="goBackBtn" type="button">Go Back</button>
  </div>

  <div class="bubble" id="thankBubble">
    <h3>Thank You!</h3>
    <p>Thanks for submitting! We’ve received your form and will get back to you shortly.</p>
    <button class="bubble-link" id="backHomeBtn" type="button">Back</button>
  </div>

</div>

<script>
const form = document.getElementById("feedbackForm");
const openConfirmBtn = document.getElementById("openConfirmBtn");

const overlay = document.getElementById("overlay");
const confirmBubble = document.getElementById("confirmBubble");
const thankBubble = document.getElementById("thankBubble");

const goBackBtn = document.getElementById("goBackBtn");
const confirmSubmitBtn = document.getElementById("confirmSubmitBtn");
const backHomeBtn = document.getElementById("backHomeBtn");

function isValid(){
  const ok = form.checkValidity();
  if(!ok) form.reportValidity();
  return ok;
}

function openOverlay(which){
  overlay.classList.add("show");
  confirmBubble.classList.remove("show");
  thankBubble.classList.remove("show");

  if(which==="confirm") confirmBubble.classList.add("show");
  if(which==="thank") thankBubble.classList.add("show");
}

function closeOverlay(){
  overlay.classList.remove("show");
  confirmBubble.classList.remove("show");
  thankBubble.classList.remove("show");
}

openConfirmBtn.onclick = ()=>{
  if(isValid()) openOverlay("confirm");
};

goBackBtn.onclick = closeOverlay;

confirmSubmitBtn.onclick = ()=>{
  openOverlay("thank");
  form.reset();
};

backHomeBtn.onclick = closeOverlay;

overlay.onclick = e=>{
  if(e.target===overlay) closeOverlay();
};

window.onkeydown = e=>{
  if(e.key==="Escape") closeOverlay();
};
</script>

</body>
</html>
